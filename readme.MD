**Содержание**

**Описание**

Это тестовый проект, реализующий форму регистрации/входа средствами PHP, MySQL и JS с валидацией данных и поддержкой мультиязычности.
Но по сути, данный проект может использоваться как стартовый набор для создания полноценного сайта, т.к. 
есть базовая структура, возможность задавать настройки для разнах сред исполнения (dev, prod), легко добавлять
маршруты, переводы языков (строки и части шаблонов) и сами шаблоны. 

Проект не использует какие-либо PHP-фреймворки, но используются следующие библиотеки: 
* Twig-шаблонизатор
* SafeMySQL как основа для создания класса для безопасного и удобного доступа к БД (не ORM)
* SimpleImage для обрезки изображений на стороне сервера

А на стороне клиента используется:
* Twitter Bootstrap
* jQuery
* jQuery-cropper

**Возможности**:
* Регистрация пользователей
* Валидация входных полей (длина, формат, доступность email, дополнительная проверка с помощью Google reCAPTCHA) на клиентской и серверной сторонах
* Выбор, обрезка и загрузка изображения (аватарки) пользователя на клиентской стороне, но с верификацией на стороне сервера и уменьшением размера, если он превысит 
максимально разрешённый размер изображения (задаётся в настройках, уменьшение размера происходит пропорционально)
* Авторизация с защитой от перебора (после пары неудачных попыток дополнительная проверка через reCAPTCHA, ещё после нскольких блокировка по IP на какое-то время)
* Просмотр своего профиля и возможность выбрать, обрезать и загрузить другую аватарку
* Переключение языка (на любой странице сайта). Смена языка касается как элементов оформления страницы, так и возвращаемых сообщений с сервера
* Автоопределение языка по параметрам браузера клиента, а в случае невозможности определить, будет использован язык по-умолчанию, который определён в настройках
* Есть пример главной страницы и страницы 404 (можно из верхнего меню перейти на страницу "О нас" или ввести любой несуществующий путь)

**Подробное описание и как это работает**
* Сайт использует единую точку входа (index.php), поэтому веб-сервер должен быть специальным образом настроен (примеры настроек для популярных веб-серверов будут ниже)
* У сайта есть верхнее меню, откуда можно перейти на главную страницу, на страницу "О нас", которая вызовет ошибку 404 (т.к. этой страницы нарочно нет), 
поменять язык(выбрав из доступных на текущий момент языков), перейти на страницу авторизации или регистрации.
* Главная страница сайта доступна для всех пользователей, однако, если пользователь зарегистрирован и авторизован, 
то он увидит приветствие и своё имя, а иначе предложение зарегистрироваться и авторизоваться. Остальная часть страницы одинакова для всех пользователей.
* На странице регистрации работает автоматическая валидация полей (при потере фокуса на поле), а результат проверки введённых данных отображается 
соответствующей иконкой внутри поля и подписью под полем. Также поле для вввода email автоматически проверяется на доступность данного адреса, ведь если 
он уже занят, лучше пользователю об этом узнать заранее, а не после нажатия кнопки. При выборе изображения есть возможность сразу же его обрезать.
Но не смотря на проверки на клиентской стороне, те же самые проверки проводятся и на стороне сервера (вдруг кто-то сделает запрос в обход страницы регистрации),
а в случае возникновения ошибок, регистрация не будет совершена, а пользователю снова предоставится возможность ввести данные (поля будут иметь прежние значения) 
и выведен список возникших ошибок. После успешной регистрации об этом так же будет сообщено пользователю и он сразу же будет перенаправлен на страницу авторизации.
* На странице авторизации всего два поля: email и пароль. В настройках сайта можно задать количество возможных неудачных попыток авторизации. Если это число
будет превышено, то появится дополнительная проверка с помощью Google reCAPTCHA (если она настроена и включена). Если и после этого будет произведено какое-то
количество неудачных попыток авторизации (что тоже настраивается в настройках), то вход с текущего IP-адреса будет запрещён на некоторое время, которое так же
можно настроить администратору сайта. В случае же успешной авторизации пользователь сразу попадает на страницу своего профиля.
* На странице профиля отображается информация о пользователе, которую он указал при регистрации, плюс время и IP адрес регистрации, 
а также время и IP адрес последнего обращения к сайту. Также есть возможность обновить аватарку, как и при регистрации, сразу же обрезав. 
Процесс загрузкий новой аватарки отображается спиннером на кнопке выбора аватарки. Очень удобно.

**Структура проекта и дальнейшее развитие**

Инициализация основных компонентов приложения и добавление глобальных переменных в шаблонизатор: файл **_./bootstrap/app.php_**

Настройки хранятся в директории _**./configs/**_





`location / {
     try_files $uri $uri/ /index.php?$args;
 }`
 
 `RewriteEngine on
  RewriteBase /
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteRule . index.php`